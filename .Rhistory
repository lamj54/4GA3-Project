Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
#3 Neighbourhood are different so there must be an manual correction prior to merging
Final_Table$Neighbourhood[128]
View(covidcases)
#3 Neighbourhood are different so there must be an manual correction prior to merging
Final_Table$Neighbourhood[128] <- "test"
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128]
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128] <- "Weston-Pellam Park"
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128] <- "Weston-Pellam Park"
neighbourhood$Neighbourhood[16] <- "Briar Hill - Belgravia"
neighbourhood$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
View(Final_Table)
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
chr <- as.character.Date(covidcases$`Episode Date`)
covidcases$'nd' <-chr
fweek <- c("2021-12-01","2021-12-02","2021-12-03","2021-12-04","2021-12-05","2021-12-06","2021-12-07")
lweek <- c("2021-12-25","2021-12-26","2021-12-27","2021-12-28","2021-12-29","2021-12-30","2021-12-31")
fweektb <- subset(covidcases,nd %in% fweek)
lweektb <- subset(covidcases,nd %in% lweek)
ftab <- as.data.frame(table(fweektb$`Neighbourhood Name`))
ltab <- as.data.frame(table(lweektb$`Neighbourhood Name`))
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
View(neighbourhood)
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128] <- "Weston-Pellam Park"
neighbourhood$Neighbourhood[16] <- "Briar Hill - Belgravia"
neighbourhood$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#Neighbourhood Income Data
NeighbourhoodIncome <- read_csv(paste(wd,"/NeighbourhoodsIncomeData.csv", sep=""))
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
knitr::opts_chunk$set(echo = TRUE)
#Libraries needed (maybe?)
library(isdas)
library(spatstat)
library(tidyverse)
library(ggplot2)
library(rgdal)
library(sf)
library(dplyr)
setwd("C:/Github/4GA3-Project")
# Set working directory to the project folder on github
wd <- getwd()
#import shp file of neighbourhoods
nshp <- st_read(paste(wd, "/Neighbourhoods.shp", sep = ""))
st_drivers()
#visualizing shpfile
ggplot() +
geom_sf(data = nshp, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
#Deleting the neighbourhood ID from the neighbourhood field for pairing to final table
#Extracting column as matrix
f2 <- as.matrix(nshp[2])
#deleting geometry field
f2 <- subset(f2, select = -c(geometry) )
#deleting neighbourhood IDs
f2 <- gsub("[1234567890()]", " ", f2)
#deleting space after
f2 <- str_squish(f2)
#rejoining to shp file
nshp[2] <- f2
chr <- as.character.Date(covidcases$`Episode Date`)
covidcases$'nd' <-chr
fweek <- c("2021-12-01","2021-12-02","2021-12-03","2021-12-04","2021-12-05","2021-12-06","2021-12-07")
lweek <- c("2021-12-25","2021-12-26","2021-12-27","2021-12-28","2021-12-29","2021-12-30","2021-12-31")
fweektb <- subset(covidcases,nd %in% fweek)
lweektb <- subset(covidcases,nd %in% lweek)
ftab <- as.data.frame(table(fweektb$`Neighbourhood Name`))
ltab <- as.data.frame(table(lweektb$`Neighbourhood Name`))
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128] <- "Weston-Pellam Park"
neighbourhood$Neighbourhood[16] <- "Briar Hill - Belgravia"
neighbourhood$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#Neighbourhood Income Data
Socioeconomic_variables <- read_csv(paste(wd,"/Neighbourhoods_socioeconomic_variables.csv", sep=""))
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#Neighbourhood Income Data
Socioeconomic_variables <- read_csv(paste(wd,"/Neighbourhoods_socioeconomic_variables.csv", sep=""))
#3 Neighbourhood are different so there must be an manual correction prior to merging
Socioeconomic_variables$Neighbourhood[128] <- "Weston-Pellam Park"
Socioeconomic_variables$Neighbourhood[16] <- "Briar Hill - Belgravia"
Socioeconomic_variables$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbourhood socioeconomic variables data with final table
Final_Table <- merge(Final_Table, Socioeconomic_variables)
#Merging shpfile to final table
neighbourhoods <- left_join(Final_Table, nshp, c("Neighbourhood" = "FIELD_2"))
View(fweektb)
View(neighbourhoods)
ggplot() +
geom_sf(data =neighbourhoods$fold_increase, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
ggplot(neighbourhoods) +
geom_sf(aes(fill = cut_number(fold_increase, 5)), color = NA, size = 0.1) +
scale_fill_brewer(palette = "YlOrRd") +
coord_sf() +
labs(fill = "Case Fold Increase")
ggplot(neighbourhoods) +
geom_sf(aes(fill = cut_number(fold_increase, 4)), color = NA, size = 0.1) +
scale_fill_brewer(palette = "YlOrRd") +
coord_sf() +
labs(fill = "Case Fold Increase")
class(neighbourhoods)
class(Neighbourhood)
View(neighbourhoods)
View(neighbourhood)
View(neighbourhood)
st_as_sf(neighbourhoods, coords = "geometry")
st_as_sf(neighbourhoods, wkt = "geometry")
sf <- st_as_sf(neighbourhoods, wkt = "geometry")
ggplot(data = neighbourhoods) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1) +
ggplot(data = neighbourhoods) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1)
View(neighbourhoods[[27]][[4]])
ggplot(data = neighbourhoods) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1) + coord_sf()
ggplot(data = neighbourhoods) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1) + coord_sf()
ggplot() +
geom_sf(data = neighbourhoods) +
ggtitle("neighbourhoods") +
scale_fill_distiller(name = "Case Fold Increase",palette = "YlOrRd", direction = 1) +
coord_sf()
class(nshp)
class(neighbourhoods)
#Merging shpfile to final table
nshp <- left_join(Final_Table, nshp, c("Neighbourhood" = "FIELD_2"))
class(nshp)
class(nshp)
class(nshp)
#Merging shpfile to final table
nshp <- left_join(Final_Table, nshp, c("Neighbourhood" = "FIELD_2"))
#Merging shpfile to final table
nshp <- left_join(Final_Table, nshp, c("Neighbourhood" = "FIELD_2"))
class(nshp)
View(nshp)
ggplot() +
geom_sf(data = nshp, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
# Set working directory to the project folder on github
wd <- getwd()
#import shp file of neighbourhoods
nshp <- st_read(paste(wd, "/Neighbourhoods.shp", sep = ""))
st_drivers()
#visualizing shpfile
ggplot() +
geom_sf(data = nshp, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
class(nshp)
class(nshp)
#Merging shpfile to final table
nshp <- nshp %>%
left_join(Final_Table,
by = c("Neighbourhood" = "FIELD_2"))
View(Final_Table)
#Merging shpfile to final table
nshp <- nshp %>%
left_join(Final_Table,
by = c("FIELD_2" = "Neighbourhood))
#Merging shpfile to final table
nshp <- nshp %>%
left_join(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
class(nshp)
ggplot(data = nshp) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1) +
theme_minimal()
ggplot(data = nshp) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1) +
ggplot(data = nshp) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1)
#Merging shpfile to final table
nshp <- nshp %>%
merge(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
#Merging shpfile to final table
nshp <- nshp %>%
right_join(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
#Merging shpfile to final table
nshp <- nshp %>%
merge(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
#Merging shpfile to final table
nshp <-  merge(nshp, Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
# Set working directory to the project folder on github
wd <- getwd()
#import shp file of neighbourhoods
nshp <- st_read(paste(wd, "/Neighbourhoods.shp", sep = ""))
st_drivers()
#visualizing shpfile
ggplot() +
geom_sf(data = nshp, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
#Merging shpfile to final table
nshp <- nshp %>%
merge(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
#Merging shpfile to final table
nshp <- nshp %>%
merge(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
#Merging shpfile to final table
nshp <- nshp %>%
inner_join(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
ggplot(data = nshp) +
geom_sf(aes(fill = fold_increase)) +
scale_fill_distiller(name = "Case Fold Increase",
palette = "YlOrRd",
direction = 1)
# Set working directory to the project folder on github
wd <- getwd()
#import shp file of neighbourhoods
nshp <- st_read(paste(wd, "/Neighbourhoods.shp", sep = ""))
st_drivers()
#visualizing shpfile
ggplot() +
geom_sf(data = nshp, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
#Merging shpfile to final table
nshp <- nshp %>%
full_join(Final_Table,
by = c("FIELD_2" = "Neighbourhood"))
#Deleting the neighbourhood ID from the neighbourhood field for pairing to final table
#Extracting column as matrix
f2 <- as.matrix(nshp[2])
#deleting geometry field
f2 <- subset(f2, select = -c(geometry) )
#deleting neighbourhood IDs
f2 <- gsub("[1234567890()]", " ", f2)
#deleting space after
f2 <- str_squish(f2)
#rejoining to shp file
nshp[2] <- f2
#Covid Cases
covidcases <- read_csv(paste(wd,"/COVID19 cases.csv", sep=""))
#Neighborhood Data
neighbourhood <- read_csv(paste(wd,"/Neighbourhood_POP.csv", sep=""))
chr <- as.character.Date(covidcases$`Episode Date`)
covidcases$'nd' <-chr
fweek <- c("2021-12-01","2021-12-02","2021-12-03","2021-12-04","2021-12-05","2021-12-06","2021-12-07")
lweek <- c("2021-12-25","2021-12-26","2021-12-27","2021-12-28","2021-12-29","2021-12-30","2021-12-31")
fweektb <- subset(covidcases,nd %in% fweek)
lweektb <- subset(covidcases,nd %in% lweek)
ftab <- as.data.frame(table(fweektb$`Neighbourhood Name`))
ltab <- as.data.frame(table(lweektb$`Neighbourhood Name`))
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128] <- "Weston-Pellam Park"
neighbourhood$Neighbourhood[16] <- "Briar Hill - Belgravia"
neighbourhood$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#Neighbourhood Income Data
Socioeconomic_variables <- read_csv(paste(wd,"/Neighbourhoods_socioeconomic_variables.csv", sep=""))
#3 Neighbourhood are different so there must be an manual correction prior to merging
Socioeconomic_variables$Neighbourhood[128] <- "Weston-Pellam Park"
Socioeconomic_variables$Neighbourhood[16] <- "Briar Hill - Belgravia"
Socioeconomic_variables$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbourhood socioeconomic variables data with final table
Final_Table <- merge(Final_Table, Socioeconomic_variables)
Final_Table$Neighbourhood
Final_Table$Neighbourhood[1]
droplevels(Final_Table$Neighbourhood)
Final_Table$Neighbourhood[1]
Final_Table$Neighbourhood[1]
knitr::opts_chunk$set(echo = TRUE)
#Covid Cases
covidcases <- read_csv(paste(wd,"/COVID19 cases.csv", sep=""))
#Libraries needed (maybe?)
library(isdas)
library(spatstat)
library(tidyverse)
library(ggplot2)
library(rgdal)
library(sf)
library(dplyr)
# Set working directory to the project folder on github
wd <- getwd()
#import shp file of neighbourhoods
nshp <- st_read(paste(wd, "/Neighbourhoods.shp", sep = ""))
st_drivers()
#visualizing shpfile
ggplot() +
geom_sf(data = nshp, size = 1, color = "black", fill = "red") +
ggtitle("Neighbourhoods") +
coord_sf()
#Deleting the neighbourhood ID from the neighbourhood field for pairing to final table
#Extracting column as matrix
f2 <- as.matrix(nshp[2])
#deleting geometry field
f2 <- subset(f2, select = -c(geometry) )
#deleting neighbourhood IDs
f2 <- gsub("[1234567890()]", " ", f2)
#deleting space after
f2 <- str_squish(f2)
#rejoining to shp file
nshp[2] <- f2
#Covid Cases
covidcases <- read_csv(paste(wd,"/COVID19 cases.csv", sep=""))
#Neighborhood Data
neighbourhood <- read_csv(paste(wd,"/Neighbourhood_POP.csv", sep=""))
chr <- as.character.Date(covidcases$`Episode Date`)
covidcases$'nd' <-chr
fweek <- c("2021-12-01","2021-12-02","2021-12-03","2021-12-04","2021-12-05","2021-12-06","2021-12-07")
lweek <- c("2021-12-25","2021-12-26","2021-12-27","2021-12-28","2021-12-29","2021-12-30","2021-12-31")
fweektb <- subset(covidcases,nd %in% fweek)
lweektb <- subset(covidcases,nd %in% lweek)
ftab <- as.data.frame(table(fweektb$`Neighbourhood Name`))
ltab <- as.data.frame(table(lweektb$`Neighbourhood Name`))
#This section in creating final_table
#Neighbourhood_Name, F_weekcases, L_weekcases, POP, F_weekrate,, L_weekrate, Rate_over_month, Case_over_month
#We need to add population for each neighbourhood and join it to the final table
Neighbourhood <- ftab$Var1
F_weekcases <- ftab$Freq
L_weekcases <- ltab$Freq
Case_over_month <- ltab$Freq - ftab$Freq
#Create Final table
Final_Table <- data.frame(Neighbourhood, F_weekcases, L_weekcases)
#3 Neighbourhood are different so there must be an manual correction prior to merging
neighbourhood$Neighbourhood[128] <- "Weston-Pellam Park"
neighbourhood$Neighbourhood[16] <- "Briar Hill - Belgravia"
neighbourhood$Neighbourhood[30] <- "Danforth-East York"
#Merge neighbour with final table
Final_Table <- merge(Final_Table, neighbourhood)
# Creating the case rates per 10,000
Final_Table$F_weekrate <- Final_Table$F_weekcases/Final_Table$POP * 10000
Final_Table$L_weekrate <- Final_Table$L_weekcases/Final_Table$POP * 10000
# Creating rate change
Final_Table$Rate_Change <- Final_Table$L_weekrate - Final_Table$F_weekrate
# Creating fold increase
Final_Table$fold_increase <- (Final_Table$L_weekrate - Final_Table$F_weekrate) /Final_Table$F_weekrate
#Neighbourhood Income Data
Socioeconomic_variables <- read_csv(paste(wd,"/Neighbourhoods_socioeconomic_variables.csv", sep=""))
#3 Neighbourhood are different so there must be an manual correction prior to merging
Socioeconomic_variables$Neighbourhood[128] <- "Weston-Pellam Park"
Socioeconomic_variables$Neighbourhood[16] <- "Briar Hill - Belgravia"
Socioeconomic_variables$Neighbourhood[30] <- "Danforth-East York"
#Merging shpfile to final table
neighbourhoods <- left_join(Final_Table, nshp, c("Neighbourhood" = "FIELD_2"))
Final_Table$Neighbourhood[1][1]
Final_Table$Neighbourhood[[1]]
class(Final_Table$Neighbourhood)
class(Final_Table$Neighbourhood)
class(nshp$FIELD_2)
#Merge neighbourhood socioeconomic variables data with final table
Final_Table <- merge(Final_Table, Socioeconomic_variables)
#Merging shpfile to final table
neighbourhoods <- left_join(Final_Table, nshp, c("Neighbourhood" = "FIELD_2"))
View(Final_Table)
View(neighbourhoods)
neighbourhoods <- left_join(nshp, Final_Table c("FIELD_2" = "Neighbourhood"))
neighbourhoods <- left_join(nshp, Final_Table, c("FIELD_2" = "Neighbourhood"))
View(neighbourhoods)
class(neighbourhoods)
